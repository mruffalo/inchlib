<!DOCTYPE html>
<html>
<head>

{% load staticfiles %}
<link rel="stylesheet" href="{% static "css/pure-min.css" %}" type="text/css"/>
<link rel="stylesheet" href="{% static "css/inchlib.css" %}" type="text/css"/>
<link rel="stylesheet" href="{% static "css/highlight.css" %}" type="text/css"/>
<script src="{% static "js/jquery-2.0.3.min.js" %}"></script>
<script src="{% static "js/konva.min.js" %}"></script>
<script src="{% static "js/inchlib_dev.js" %}"></script>

<title>InCHlib - Interactive Cluster Heatmap library</title>
</head>
<script>
$(document).ready(function(){

    window.dendrogram_1 = new InCHlib(
            {
                target: "dendrogram_1",
                // heatmap: false,
                // heatmap_header: true,
                draw_row_ids: true,
                // fixed_row_id_size: 15,
                // column_metadata_row_height: 10,
                // column_metadata_colors: "BuYl",
                // dendrogram: true,
                max_height: 800,
                width: 800,
                heatmap_colors: "BuWhRd",
                column_dendrogram: true,
                column_metadata: true,
                // metadata: false,
                max_row_height: 30,
                max_column_width: 100,
                unified_dendrogram_distance: true,

                // metadata_colors: "RdLrBu",
                // highlight_colors: "PuOr",
                // heatmap_font_color: "white",
                // show_export_button: true,
                // count_column: true,
                // values_center: "median",
                // independent_columns: false,
                // max_percentile: 90,
                // middle_percentile: 60,
                // min_percentile: 20,
                // columns_order: [51, 51, 2, 3, 4, 5, 6, 7, 8, 34, 10, 11, 12, 13, 14, 15, 16, 17, 35, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 9, 18, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 51, 51, 51, 51, 1],
                // alternative_data: true,
                // images_as_alternative_data: true,
                // images_path: {"dir": "static/img/test_images/", "ext": ".jpg"}
                navigation_toggle: {"distance_scale": true, "filter_button": false, "export_button": false, "color_scale": true, "hint_button": false}
            });
    // dendrogram_1.add_color_scale("WhBk", {"start": {"r":255, "g": 255, "b": 255}, "middle": {"r": 236, "g": 158, "b": 56}, "end": {"r": 0, "g": 0, "b": 0}})

    dendrogram_1.read_data_from_file("{% static "data/whiskey.json" %}");
    dendrogram_1.draw();

    // window.dendrogram_2 = new InCHlib(
    //         {
    //             target: "dendrogram_2",
    //             // heatmap: false,
    //             // heatmap_header: true,
    //             draw_row_ids: true,
    //             // fixed_row_id_size: 15,
    //             // column_metadata_row_height: 10,
    //             // column_metadata_colors: "BuYl",
    //             // dendrogram: true,
    //             max_height: 400,
    //             width: 800,
    //             heatmap_colors: "BuWhRd",
    //             column_dendrogram: true,
    //             column_metadata: true,
    //             // metadata: false,
    //             max_row_height: 30,
    //             max_column_width: 100,

    //             // metadata_colors: "RdLrBu",
    //             // highlight_colors: "PuOr",
    //             // heatmap_font_color: "white",
    //             // show_export_button: true,
    //             // count_column: true,
    //             // values_center: "median",
    //             // independent_columns: false,
    //             // max_percentile: 90,
    //             // middle_percentile: 60,
    //             // min_percentile: 20,
    //             // columns_order: [51, 51, 2, 3, 4, 5, 6, 7, 8, 34, 10, 11, 12, 13, 14, 15, 16, 17, 35, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 9, 18, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 51, 51, 51, 51, 1],
    //             // alternative_data: true,
    //             // images_as_alternative_data: true,
    //             // images_path: {"dir": "static/img/test_images/", "ext": ".jpg"}
    //         });
    // // dendrogram_1.add_color_scale("WhBk", {"start": {"r":255, "g": 255, "b": 255}, "middle": {"r": 236, "g": 158, "b": 56}, "end": {"r": 0, "g": 0, "b": 0}})

    // dendrogram_2.read_data_from_file("{% static "data/whiskey.json" %}");
    // dendrogram_2.draw();

    // dendrogram_1.events.row_onclick = function(object_ids, evt){
    //     console.log("row_onclick", object_ids, evt);
    // };

    // dendrogram_1.events.row_onmouseover = function(object_ids, evt){
    //     console.log("row_onmouseover", object_ids, evt);
    // };

    // dendrogram_1.events.row_onmouseout = function(evt){
    //     console.log("row_onmouseout", evt);
    // };

      
    // dendrogram_1.events.dendrogram_node_onclick = function(object_ids, node_id, evt){
    //     console.log("dendrogram_node_onclick", object_ids, node_id, evt);
    // };

    // dendrogram_1.events.column_dendrogram_node_onclick = function(column_indexes, node_id, evt){
    //     console.log("column_dendrogram_node_onclick", column_indexes, node_id, evt);
    // };

    // dendrogram_1.events.dendrogram_node_highlight = function(object_ids, node_id){
    //     console.log("dendrogram_node_highlight", object_ids, node_id);
    // };

    // dendrogram_1.events.column_dendrogram_node_highlight = function(column_indexes, node_id){
    //     console.log("column_dendrogram_node_highlight", column_indexes, node_id);
    // };

    // dendrogram_1.events.dendrogram_node_unhighlight = function(node_id){
    //     console.log("dendrogram_node_unhighlight", node_id);
    // };

    // dendrogram_1.events.column_dendrogram_node_unhighlight = function(node_id){
    //     console.log("column_dendrogram_node_unhighlight", node_id);
    // };

      // dendrogram_1.events.heatmap_onmouseout = function(evt){
      //   console.log("heatmap_onmouseout", evt);
      // };


    //   dendrogram_1.events.on_zoom = function(object_ids, node_id){
    //     console.log("on_zoom", object_ids, node_id);
    //   };


    //   dendrogram_1.events.on_unzoom = function(node_id){
    //     console.log("on_unzoom", node_id);
    //   };


    //   dendrogram_1.events.on_columns_zoom = function(column_indexes, node_id){
    //     console.log("on_columns_zoom", column_indexes, node_id);
    //   };

    //   dendrogram_1.events.on_columns_unzoom = function(node_id){
    //     console.log("on_columns_unzoom", node_id);
    //   };


    //   dendrogram_1.events.on_refresh = function(){
    //     console.log("on_refresh");
    //   };

    //   dendrogram_1.events.empty_space_onclick = function(evt){
    //     console.log("empty_space_onclick", evt);
    //   }
    
    /*
    window.dendrogram_1 = new InCHlib(
            {
                target: "dendrogram_1",
                metadata: true, 
                // heatmap: false,
                heatmap_header: true,
                draw_row_ids: true,
                // column_dendrogram: true,
                dendrogram: true,
                max_height: 500,
                width: 800,
                heatmap_colors: "Greens",
                metadata_colors: "RdLrBu",
                highlight_colors: "PuOr",
                header_as_heatmap_row: true,
                show_export_button: true,
            });
    // dendrogram.add_color_scale("WhBk", {"start": {"r":255, "g": 255, "b": 255}, "middle": {"r": 236, "g": 158, "b": 56}, "end": {"r": 0, "g": 0, "b": 0}})
    dendrogram_1.read_data_from_file("{% static "data/chembl_era_normalized.json" %}");
    dendrogram_1.draw();

    window.dendrogram_2 = new InCHlib(
            {
                target: "dendrogram_2",
                metadata: true, 
                // heatmap: false,
                draw_row_ids: true,
                // column_dendrogram: true,
                dendrogram: true,
                max_height: 500,
                width: 800,
                heatmap_colors: "Greens",
                metadata_colors: "RdLrBu",
                highlight_colors: "PuOr",
                header_as_heatmap_row: true,
                show_export_button: true
            });
    // dendrogram.add_color_scale("WhBk", {"start": {"r":255, "g": 255, "b": 255}, "middle": {"r": 236, "g": 158, "b": 56}, "end": {"r": 0, "g": 0, "b": 0}})
    dendrogram_2.read_data_from_file("{% static "data/chembl_era.json" %}");
    dendrogram_2.draw();

    dendrogram_1.events.row_onmouseover = function(leaf_id){
        dendrogram_2.highlight_rows([leaf_id]);
    }

    dendrogram_1.events.dendrogram_node_onclick = function(leaf_ids){
        dendrogram_2.highlight_rows(leaf_ids);
    }
    */
});
</script>


<body id="dev">
    <h1>DEV</h1>
       
    <div id="dendrogram_1"></div>
    <div id="dendrogram_2"></div>
</body>
</html>

